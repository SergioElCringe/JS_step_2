(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var n=[{text:"Home",link:"./imdex.html",items:[{text:"Categories",link:"./categories.html"},{text:"Product",link:"./product.html"},{text:"Cart",link:"./cart.html"},{text:"Check out",link:"./checkout.html"},{text:"Contact us",link:"./contact.html"}]},{text:"Categories",link:"./categories.html",items:[{text:"Some category",link:".#"}]},{text:"Contacts",link:"./contact.html"}],i=function(){function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e(this,"container",null),e(this,"items",null),this._init()}var r,a;return r=i,(a=[{key:"_init",value:function(){this.items=n,this.container=document.querySelector("#main_nav"),this._render()}},{key:"createMenu",value:function(t){var e=this,n="<ul>";return t.forEach((function(t){n+=e.createItem(t)})),n+="</ul>"}},{key:"createItem",value:function(t){var e,n=!(null===(e=t.items)||void 0===e||!e.length)||!1,i=t.link,r=t.text;return""+(n?'\n                <li  class="hassubs">\n                    <a href="'.concat(i,'">').concat(r,"</a>\n                    ").concat(this.createMenu(t.items),"\n                </li>\n            "):'<li><a href="'.concat(i,'">').concat(r,"</a></li>"))}},{key:"_render",value:function(){this.container.innerHTML=this.createMenu(this.items)}}])&&t(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),i}();function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=[{imgUrl:"/product_1.jpg",name:"Smart Phone",price:670,category:1},{imgUrl:"/product_2.jpg",name:"Smart Phone",price:670,category:null},{imgUrl:"/product_3.jpg",name:"Smart Phone",price:670,category:null},{imgUrl:"/product_4.jpg",name:"Smart Phone",price:670,category:1},{imgUrl:"/product_5.jpg",name:"Smart Phone",price:670,category:2},{imgUrl:"/product_6.jpg",name:"Smart Phone",price:670,category:null},{imgUrl:"/product_7.jpg",name:"Smart Phone",price:670,category:null},{imgUrl:"/product_8.jpg",name:"Smart Phone",price:670,category:3}],o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"items",[]),a(this,"container",null),this._init()}var e,n;return e=t,(n=[{key:"_init",value:function(){this.items=c,this.cart=cart,this.container=document.querySelector("#catalog"),this._render(),this._handleEvents()}},{key:"_handleEvents",value:function(){var t=this;this.container.addEventListener("click",(function(e){if(e.target.classList.contains("btn-add")){var n=e.target.dataset,i=n.name,r=n.price,a=n.imgurl,c=n.id;t.cart.addItem({name:i,price:r,id:c,imgUrl:a})}}))}},{key:"createTemplate",value:function(t){var e=t.imgUrl,n=t.name,i=t.price,r=t.category,a=t.id;return'\n    <div class="product">\n      <div class="product_image"><img src="'.concat("https://raw.githubusercontent.com/SergioElCringe/JS_step_1/main/TEST_FTP/static/products"+e,'" alt=""></div>\n      ').concat(this.getProductExtraTemplate(r),'\n      <div class="product_content">\n        <div class="product_title"><a href="product.html">').concat(n,'</a></div>\n        <div class="product_price">$').concat(i,'</div>\n      </div>\n      <div \n        class="button button_custom btn-add"\n        data-imgurl="').concat(e,'"\n        data-name="').concat(n,'"\n        data-price="').concat(i,'"\n        data-id="').concat(a,'"\n      >\n        <span>Add</span>\n      </div>\n    </div>\n    ')}},{key:"getProductExtraTemplate",value:function(t){var e=t?this.getCategory(t):null;return e?'\n      <div class="product_extra '.concat(e.className,'">\n        <a href="categories.html">').concat(e.text,"</a>\n      </div>\n    "):""}},{key:"getCategory",value:function(t){var e,n;switch(t){case 1:e="product_new",n="New";break;case 2:e="product_hot",n="Hot";break;default:e="product_sale",n="Sale"}return{className:e,text:n}}},{key:"_render",value:function(){var t=this,e="";this.items.forEach((function(n){e+=t.createTemplate(n)})),this.container.innerHTML=e}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"containerItems",null),s(this,"containerCounter",null),s(this,"containerPrice",null),s(this,"items",null),s(this,"itemsCount",0),s(this,"itemsPrice",0)}var e,n;return e=t,(n=[{key:"_init",value:function(){this.items=CARTITEMS,this.containerItems=document.querySelector("#cart-items"),this.containerCounter=document.querySelector("#cart-counter"),this.containerPrice=document.querySelector("#cart-price"),this.containerItems.addEventListener("click",this.removeItem.bind(this)),this._render()}},{key:"createItem",value:function(t){var e=t.imgUrl,n=t.name,i=t.price,r=t.amount;return'\n\t\t\t<div class="cart__item">\n\t\t\t\t<img class="cart__item__img" src="'.concat(PRODUCTS_API+e,'">\n\t\t\t\t<div class="cart__item__info">\n\t\t\t\t\t<span>').concat(n,'</span>\n\t\t\t\t\t<div class="price__block">\n\t\t\t\t\t\t<span>$').concat(i,"</span>\n\t\t\t\t\t\t<span>").concat(r,'</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button class="remove"> x </button>\n\t\t\t</div>\n\t\t\t')}},{key:"addItem",value:function(t){var e=t.imgUrl,n=t.name,i=t.price,r=t.id,a=this.items.find((function(t){return t.id===r}));if(a)a.amount++;else{var c={imgUrl:e,name:n,price:i,id:r,amount:1};this.items.push(c)}this._render()}},{key:"removeItem",value:function(t){t.target.classList.contains("remove")&&this.items.pop(),this._render()}},{key:"countPrice",value:function(){this.itemsPrice=this.items.reduce((function(t,e){return t+ +e.price*e.amount}),0)}},{key:"countAmount",value:function(){this.itemsCount=this.items.reduce((function(t,e){return t+e.amount}),0)}},{key:"getTotal",value:function(t,e){return"<hr>\n\t\t\t<div>Total quantity:".concat(t,"<br></vr>Total price:$").concat(e,"</div>\n\t\t\t<hr>\n\t\t\t</div>\n\t\t\t")}},{key:"_render",value:function(){var t=this,e="";this.countAmount(),this.countPrice(),this.items.forEach((function(n){e+=t.createItem(n)})),e&&this.items.length>0&&(e+=this.getTotal(this.itemsCount,this.itemsPrice)),this.containerItems.innerHTML=e,this.containerCounter.innerHTML="(".concat(this.itemsCount,")")}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();new i,new o,new l})();